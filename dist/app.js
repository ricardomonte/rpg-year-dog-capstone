(()=>{"use strict";var e={803:(e,t,s)=>{var i=s(260),a=s.n(i);const n={width:768,height:768},r={type:a().AUTO,...n,zoom:1,pixelArt:!0,physics:{default:"arcade",arcade:{gravity:{y:0},debug:!0}}};class o extends a().Scene{constructor(){super("Boot")}create(){this.scene.start("PreloadScene")}}const c=o;class h extends a().Scene{constructor(){super("PreloadScene")}preload(){this.load.tilemapTiledJSON("map2","assets/housemap.json"),this.load.image("inside","assets/Inside.png"),this.load.image("dog","assets/dog.png"),this.load.spritesheet("girl","assets/Spritegirl.png",{frameWidth:16,frameHeight:16}),this.load.spritesheet("attack","assets/girl-punch.png",{frameWidth:16,frameHeight:16}),this.load.spritesheet("slashef","assets/slash.png",{frameWidth:16,frameHeight:16}),this.load.spritesheet("wolf","assets/hell-hound-idle.png",{frameWidth:48,frameHeight:32}),this.load.image("memory","assets/mem_img.png"),this.load.image("framing","assets/frame.png"),this.load.spritesheet("wolfF","assets/hell-hound-idle.png",{frameWidth:48,frameHeight:32}),this.load.image("girlF"," assets/girl-fight.png"),this.load.image("button","assets/button.png"),this.load.image("btnSave","assets/buttonsave.png"),this.load.image("btnMenu","assets/buttonbackmenu.png"),this.load.audio("theme","assets/Dungeon-CrystalCave.ogg");const e=this.add.graphics(),t=this.add.graphics();t.fillStyle(2236962,.8),t.fillRect(240,270,320,50);const{width:s}=this.cameras.main,{height:i}=this.cameras.main,a=this.make.text({x:s/2,y:i/2-50,text:"Loading...",style:{font:"20px monospace",fill:"#ffffff"}});a.setOrigin(.5,.5);const n=this.make.text({x:s/2,y:i/2-5,text:"0%",style:{font:"18px monospace",fill:"#ffffff"}});n.setOrigin(.5,.5);const r=this.make.text({x:s/2,y:i/2+50,text:"",style:{font:"18px monospace",fill:"#ffffff"}});r.setOrigin(.5,.5),this.load.on("progress",(t=>{n.setText(`${parseInt(100*t,10)}%`),e.clear(),e.fillStyle(16777215,1),e.fillRect(250,280,300*t,30)})),this.load.on("fileprogress",(e=>{r.setText(`Loading asset: ${e.src}`)})),this.load.on("complete",(()=>{e.destroy(),t.destroy(),a.destroy(),n.destroy(),r.destroy()})),this.timedEvent=this.time.delayedCall(2e3,this.ready,[],this)}create(){this.scene.start("MenuScene")}}const l=h;class d extends a().Scene{constructor(){super("MenuScene"),this.menu=[{scene:"Intro",text:"Start Game"},{scene:"scoreBoard",text:"Score"},{scene:null,text:"Exit"}],this.center=384,this.fontSize=32,this.fontStep=42,this.fontOptions={fontSize:`${this.fontSize}px`,fill:"#fff"}}create(){this.createMenu(),this.sound.get("theme")||this.sound.add("theme",{loop:!0,volume:.2}).play()}setupMenuEvents(e){const t=e.textGO;t.setInteractive(),t.on("pointerover",(()=>{t.setStyle({fill:"#ff0"})})),t.on("pointerout",(()=>{t.setStyle({fill:"#fff"})})),t.on("pointerup",(()=>{e.scene&&this.scene.start(e.scene),"Exit"===e.text&&this.game.destroy(!0)}))}createMenu(){let e=0;this.menu.forEach((t=>{const s=[this.center,this.center+e];t.textGO=this.add.text(...s,t.text,this.fontOptions).setOrigin(.5),e+=this.fontStep,this.setupMenuEvents(t)}))}}const p=d;class u extends a().Scene{constructor(){super("scoreBoard"),this.center=384,this.fontSize=42,this.fontStep=42,this.fontOptions={fontSize:`${this.fontSize}px`,fill:"#fff"}}create(){const e=(async()=>{const e=await fetch("https://us-central1-js-capstone-backend.cloudfunctions.net/api/games/N3rRWMIOpSUR1PI9iA3c/scores",{mode:"cors",headers:{"Content-Type":"application/json"}}),t=await e.json(),s=await t;return s.result.sort(((e,t)=>e.score<t.score?1:-1)),s})();this.add.text(this.center,50,"Scores",{fontSize:"52px",fill:"#fff"}).setOrigin(.5),this.createScore(e);this.add.image(690,650,"button").setOrigin(1,0).setInteractive().setScale(2).on("pointerup",(()=>{this.scene.start("MenuScene")}))}createScore(e){let t=0;e.then((e=>{e.result.forEach((e=>{const s=[this.center,150+t];this.add.text(...s,`${e.user} : ${e.score}`,this.fontOptions).setOrigin(.5),t+=this.fontStep}))}))}}const f=u;class m extends a().Scene{constructor(){super("Intro")}create(){this.cameras.main.fadeIn(2e3);this.text=this.add.text(32,32,"Pleople who know me \npersonally will know that i have \na dog and that im fairly open about it. \nWhen i was born i was born with a dog. \n\nWe came home from the hospital together... \n\nYou can survive the dog trying to stop you, \nand some times you make better work \nwhen you have to fight to make it...\n\nMy dog its not a good dog.",{font:"35px Arial",fill:"#ffffff"}),this.continue=this.add.text(650,700,"Continue").setOrigin(0,1).setInteractive(),this.continue.on("pointerdown",(()=>{this.scene.start("Game")}))}}const y=m,g=e=>{e.create({key:"walk-side",frames:e.generateFrameNumbers("girl",{start:3,end:5}),frameRate:8,repeat:0}),e.create({key:"up-walk",frames:e.generateFrameNumbers("girl",{start:6,end:8}),frameRate:8,repeat:0}),e.create({key:"down-walk",frames:e.generateFrameNumbers("girl",{start:0,end:2}),frameRate:8,repeat:0}),e.create({key:"player-attack",frames:e.generateFrameNumbers("attack",{start:0,end:2}),frameRate:14,repeat:0}),e.create({key:"player-slash",frames:e.generateFrameNumbers("slashef",{start:0,end:2}),frameRate:14,repeat:0})},x={addCollider(e,t,s){this.scene.physics.add.collider(this,e,t,null,s||this)},addOverlap(e,t,s){this.scene.physics.add.overlap(this,e,t,null,s||this)}};class S extends a().Physics.Arcade.Sprite{constructor(e,t,s){super(e,t,s,"girl"),e.add.existing(this),e.physics.add.existing(this),Object.assign(this,x),this.hp=100,this.init(),this.initEvents()}init(){this.speed=50,this.cursors=this.scene.input.keyboard.addKeys({up:a().Input.Keyboard.KeyCodes.W,down:a().Input.Keyboard.KeyCodes.S,left:a().Input.Keyboard.KeyCodes.A,right:a().Input.Keyboard.KeyCodes.D}),this.scene.input.keyboard.on("keydown-SPACE",(()=>{this.play("player-attack",!0)})),g(this.scene.anims)}initEvents(){this.scene.events.on(a().Scenes.Events.UPDATE,this.update,this)}update(){const{up:e,down:t,left:s,right:i}=this.cursors;s.isDown?(this.setVelocityX(-this.speed),this.setFlipX(!0),this.play("walk-side",!0)):i.isDown?(this.setVelocityX(this.speed),this.setFlipX(!1),this.play("walk-side",!0)):e.isDown?(this.setVelocityY(-this.speed),this.play("up-walk",!0)):t.isDown?(this.setVelocityY(this.speed),this.play("down-walk",!0)):this.setVelocity(0),this.body.velocity.normalize().scale(this.speed)}}const b=S;class v extends a().Physics.Arcade.Sprite{constructor(e,t,s){super(e,t,s,"wolf"),e.add.existing(this),e.physics.add.existing(this),Object.assign(this,x),this.init(),this.initEvents()}init(){var e;this.setVisible(!1),this.setImmovable(!0),this.setOffset(-1,12),(e=this.scene.anims).create({key:"walk-wolf",frames:e.generateFrameNumbers("wolf",{start:0,end:5}),frameRate:5,repeat:-1})}initEvents(){this.scene.events.on(a().Scenes.Events.UPDATE,this.update,this)}}const w=v;class k extends a().GameObjects.Container{constructor(e,t,s){super(e,t,s),e.add.existing(this),this.setPosition(310,310),this.setScrollFactor(0,0),this.setuplist()}setuplist(){const e=this.scoreBoard();this.add(e)}scoreBoard(){this.fontSize=32;const e=this.scene.add.text(0,0,"0",{fontSize:`${this.fontSize}px`,fill:"#fff"}).setScale(.3);return e.setName("score"),e}updateScoreBoard(e){this.getByName("score").setText(e)}}const P=k;class C extends a().Scene{constructor(){super("Game")}create(){this.initialScore=0,this.score={},this.hud=new P(this,0,0).setDepth(1);const e=this.createMap(),t=this.createLayers(e),s=this.getPlayerPoint(t.playerSpawn),i=this.createEnemies(t.enemiesSpawn),a=this.createPlayer(s),n=this.createCollectables(t.collectable);this.addTween(n),this.createCamera(a,e),this.createPlayerColliders(a,{colliders:{mapColliders:t.plant,propsColliders:t.prop,bookshelfColliders:t.bookshelf,collectables:n}}),this.createEnemyColliders(i,{colliders:{player:a}}),this.listenToEvents(),this.playerHp=a.hp}createMap(){const e=this.make.tilemap({key:"map2"});return e.addTilesetImage("Inside","inside"),e}createLayers(e){this.tileset=e.getTileset("Inside");const t=e.createLayer("planthouse",this.tileset).setDepth(-2),s=e.createLayer("props",this.tileset).setDepth(0),i=e.createLayer("library",this.tileset).setDepth(2),a=e.createLayer("book",this.tileset);t.setCollisionByProperty({collides:!0}),i.setCollisionByProperty({collides:!0}),s.setCollisionByProperty({collides:!0});return{plant:t,prop:s,bookshelf:i,book:a,playerSpawn:e.getObjectLayer("PlayerStart"),enemiesSpawn:e.getObjectLayer("SpawnEnemy"),collectable:e.getObjectLayer("collectables")}}getPlayerPoint(e){return this.playerSPoint=e.objects,{start:this.playerSPoint.find((e=>"spawnPlayer"===e.name))}}createCollectables(e){const t=this.physics.add.staticGroup();return e.objects.forEach((e=>{t.get(e.x,e.y,"memory").setDepth(-1)})),t}createPlayer({start:e}){return new b(this,e.x,e.y)}createEnemies(e){return e.objects.map((e=>new w(this,e.x,e.y)))}createPlayerColliders(e,{colliders:t}){e.addCollider(t.mapColliders),e.addCollider(t.propsColliders),e.addCollider(t.bookshelfColliders),e.addOverlap(t.collectables,this.onCollect,this)}createEnemyColliders(e,{colliders:t}){e.forEach((e=>{e.addCollider(t.player,this.something,this)}))}addTween(e){e.children.entries.forEach((e=>{this.tweens.add({targets:e,y:e.y-3,yoyo:!0,duration:a().Math.Between(300,550),ease:"linear",repeat:-1})}))}lololo(){this.physics.resume()}listenToEvents(){this.pauseEvent||(this.pauseEvent=this.events.on("resume",(()=>{const e=this.scene.get("lalalala");this.playerHp=e.hpPlayer,this.timedEvent=this.time.addEvent({callback:this.lololo,callbackScope:this})})))}something(e){this.physics.pause(),this.scene.pause(),e.disableBody(!0,!0),this.cameras.main.fadeIn(1e3),this.scene.launch("lalalala",{hp:this.playerHp})}onCollect(e,t){t.disableBody(!0,!0),this.initialScore+=10,localStorage.setItem("user",`${this.initialScore}`),this.hud.updateScoreBoard(this.initialScore)}createCamera(e,t){const s=this.cameras.main;s.startFollow(e),s.setBounds(0,0,t.widthInPixels,t.heightInPixels),s.zoomY=5,s.zoomX=5}}const O=C;class E extends a().Physics.Arcade.Sprite{constructor(e,t,s,i){super(e,t,s,i),e.add.existing(this),e.physics.add.existing(this),this.speed=300,this.coolDown=2e3}fire(e,t){this.setActive(!0),this.setVisible(!0),this.body.reset(e,t),this.setVelocityX(this.speed)}}const I=E;class A extends a().Physics.Arcade.Group{constructor(e){super(e.physics.world,e),this.createMultiple({frameQuantity:20,active:!1,visible:!1,key:"slashef",classType:I})}fireSlash(e){const t=this.getFirstDead(!1);t&&t.fire(e.x,e.y)}}const j=A;class T extends a().GameObjects.Container{constructor(e,t,s){super(e,t,s),e.add.existing(this),this.setPosition(395,410),this.setuplist()}setuplist(){const e=this.button();this.add(e)}button(){const e=this.scene.add.image(0,0,"button").setScale(.5);return e.setName("button"),e}}const M=T;class B extends a().Physics.Arcade.Sprite{constructor(e,t,s,i,a){super(e,t,s,"attack"),e.add.existing(this),e.physics.add.existing(this),Object.assign(this,x),this.damage=a,this.hp=i,this.maxhp=this.hp,this.init(),this.initEvents()}init(){const e=new M(this.scene,this.x,this.y).setSize(120,50);e.setInteractive(),this.projectile=new j(this.scene),this.setCollideWorldBounds(!0),this.setImmovable(!0),g(this.scene.anims),e.on("pointerdown",(()=>{this.play("player-attack",!0),this.projectile.fireSlash(this)}))}initEvents(){this.scene.events.on(a().Scenes.Events.UPDATE,this.update,this)}}const z=B;class D extends a().Physics.Arcade.Sprite{constructor(e,t,s,i){super(e,t,s,i),e.add.existing(this),e.physics.add.existing(this),this.speed=300,this.coolDown=2e3}fire(e,t){this.setFlipX(!0),this.setActive(!0),this.setVisible(!0),this.body.reset(e,t),this.setVelocityX(-this.speed)}}const F=D;class G extends a().Physics.Arcade.Group{constructor(e){super(e.physics.world,e),this.createMultiple({frameQuantity:10,active:!1,visible:!1,key:"slashef",classType:F})}counterAttack(e){const t=this.getFirstDead(!1);t&&t.fire(e.x,e.y)}}const R=G;class N extends a().Physics.Arcade.Sprite{constructor(e,t,s,i,a){super(e,t,s,"wolfF"),e.add.existing(this),e.physics.add.existing(this),Object.assign(this,x),this.damage=a,this.hp=i,this.maxhp=this.hp,this.init(),this.initEvents()}init(){this.projectile=new R(this.scene),this.setImmovable(!0),this.setCollideWorldBounds(!0)}initEvents(){this.scene.events.on(a().Scenes.Events.UPDATE,this.update,this)}attack(){this.projectile.counterAttack(this)}}const L=N;class V extends a().GameObjects.Graphics{constructor(e,t,s){super(e,t,s,"UiFight"),e.add.existing(this),this.init()}init(){this.graphics=this.scene.add.graphics(),this.graphics.lineStyle(1,16777215),this.graphics.fillStyle(204620,1),this.graphics.strokeRect(412,410,48,50),this.graphics.fillRect(412,410,48,50),this.graphics.strokeRect(362,410,60,50),this.graphics.fillRect(362,410,60,50),this.graphics.strokeRect(308,410,60,50),this.graphics.fillRect(308,410,60,50)}}const W=V;class $ extends a().Scene{constructor(){super("lalalala")}create(e){this.ui=new W(this,452,450),this.hp=e.hp;const t=new L(this,420,330,50,10).setOrigin(0,0),s=new z(this,310,350,this.hp,10).setOrigin(0,.8).setScale(2);this.damagePlayer=s.damage,this.hpPlayer=s.hp,this.cameras.main.setZoom(5),this.createPlayerColliders(s,{colliders:{wolf:t}}),this.createEnemyColliders(t,{colliders:{player:s}})}createPlayerColliders(e,{colliders:t}){e.addCollider(t.wolf.projectile,this.lili,this)}createEnemyColliders(e,{colliders:t}){e.addCollider(t.player.projectile,this.lele,this)}lele(e,t){t.setActive(!1),t.setVisible(!1),e.hp-=this.damagePlayer,0===e.hp?(this.scene.resume("Game"),this.scene.stop()):e.attack()}lili(e,t){t.setActive(!1),t.setVisible(!1),this.hpPlayer-=this.children.list[2].damage,this.hpPlayer<=0&&this.scene.start("GameOver")}}const K=$;class H extends a().Scene{constructor(){super("GameOver"),this.center=384}create(){this.add.text(32,32,"There are many people who do not survive, \n whose dogs get them. They did not work \nany les hard \n\n Neither do I",{font:"35px Arial",fill:"#ffffff"}),this.add.text(this.center,this.center,"Game Over",{font:"50px Arial",fill:"#ffffff"});const e=this.add.image(this.center,568,"btnSave").setOrigin(.5).setInteractive(),t=localStorage.getItem("user");this.saveScore(e,t)}saveScore(e,t){e.on("pointerup",(()=>{const e=window.prompt("Please enter your name to save your score.");""!==e&&null!=e&&(async(e,t)=>{const s={user:e,score:t};await fetch("https://us-central1-js-capstone-backend.cloudfunctions.net/api/games/N3rRWMIOpSUR1PI9iA3c/scores",{mode:"cors",headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(s)})})(e,t),this.scene.start("CreditScene")}))}}const U=H;class X extends a().Scene{constructor(e){super(e)}create(){const e=this.add.image(690,650,"btnMenu").setOrigin(1,0).setInteractive().setScale(2);this.scene.get("MenuScene").sound.volume=.1,e.on("pointerdown",(()=>{location.reload()}))}}const _=X;const Y=class extends _{constructor(){super("CreditScene"),this.menu=[{text:"Thanks"},{text:"For Playing"},{text:"Author"},{text:"Ricardo"},{text:"Assets from"},{text:"Pixel Pete LimeZu ansimuz.com"},{text:"Music From"},{text:"TheoAllen"}],this.center=384,this.fontSize=32,this.fontStep=42,this.fontOptions={fontSize:`${this.fontSize}px`,fill:"#fff"}}create(){super.create(),this.createMenu()}createMenu(){let e=0;this.menu.forEach((t=>{const s=[this.center,52+e];this.add.text(...s,`${t.text}`,this.fontOptions).setOrigin(.5),e+=this.fontStep}))}};class J extends a().Game{constructor(){super(r),this.scene.add("Boot",c),this.scene.add("PreloadScene",l),this.scene.add("scoreBoard",f),this.scene.add("Intro",y),this.scene.add("MenuScene",p),this.scene.add("Game",O),this.scene.add("lalalala",K),this.scene.add("GameOver",U),this.scene.add("CreditScene",Y),this.scene.start("Boot")}}window.game=new J}},t={};function s(i){if(t[i])return t[i].exports;var a=t[i]={exports:{}};return e[i](a,a.exports,s),a.exports}s.m=e,s.x=e=>{},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={143:0},t=[[803,736]],i=e=>{},a=(a,n)=>{for(var r,o,[c,h,l,d]=n,p=0,u=[];p<c.length;p++)o=c[p],s.o(e,o)&&e[o]&&u.push(e[o][0]),e[o]=0;for(r in h)s.o(h,r)&&(s.m[r]=h[r]);for(l&&l(s),a&&a(n);u.length;)u.shift()();return d&&t.push.apply(t,d),i()},n=self.webpackChunkbasic_setup=self.webpackChunkbasic_setup||[];function r(){for(var i,a=0;a<t.length;a++){for(var n=t[a],r=!0,o=1;o<n.length;o++){var c=n[o];0!==e[c]&&(r=!1)}r&&(t.splice(a--,1),i=s(s.s=n[0]))}return 0===t.length&&(s.x(),s.x=e=>{}),i}n.forEach(a.bind(null,0)),n.push=a.bind(null,n.push.bind(n));var o=s.x;s.x=()=>(s.x=o||(e=>{}),(i=r)())})();s.x()})();